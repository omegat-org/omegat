import javax.inject.Inject

interface InjectedExecOps {
    @Inject
    ExecOperations getExecOps()
}

ext.injected = project.objects.newInstance(InjectedExecOps)

ext.loadProperties = { propFile ->
    def config = new Properties()
    if (propFile.canRead()) {
        propFile.withInputStream { config.load(it) }
    }
    config
}

// platform detection
ext {
    isWindows = System.getProperty('os.name').toLowerCase().contains('windows')
    isWindows11 = isWindows && System.getProperty('os.version').contains('10.0') // Windows 11 has version 10.0.x
    isArm64 = System.getProperty('os.arch').toLowerCase().contains('aarch64')
}

