parameters:
  condition: false

steps:
  - task: Cache@2
    displayName: 'Cache Gradle'
    condition: ${{ parameters.condition }}
    inputs:
      key: 'gradle | $(Agent.OS) | $(Build.SourcesDirectory)/build.gradle'
      path: '$(GRADLE_USER_HOME)'
  - script: |
      umask a+w
      chmod -R a+w doc_src
      $(Build.SourcesDirectory)/gradlew --build-cache -PenvIsCi clean webManual manualZips
    displayName: 'Run Gradle webManual'
    condition: ${{ parameters.condition }}
  - script: |
      # stop the Gradle daemon to ensure no files are left open (impacting the save cache operation later)
      ./gradlew --stop
    displayName: Gradlew stop
