<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"file:///C:/docbook-xml-4.5/docbookx.dtd">
<chapter id="ch05.file.filters">
  <title>File Filters</title>

  <para>OmegaT features highly customizable filters, enabling you to configure
  numerous aspects. File filters are pieces of code capable of:</para>

  <itemizedlist>
    <listitem>
      <para>Reading the document in some specific file format. For instance,
      plain text files.</para>
    </listitem>
  </itemizedlist>

  <itemizedlist>
    <listitem>
      <para>Extracting the translatable content out of the file.</para>
    </listitem>
  </itemizedlist>

  <itemizedlist>
    <listitem>
      <para>Automating modifications of the translated document file names by
      replacing translatable Contents with its translation.</para>
    </listitem>
  </itemizedlist>

  <para>Most users will find the default file filter options sufficient. If
  this is not the case, open the main dialog by selecting<emphasis
  role="bold"> Options → File Filters...</emphasis> from the main menu.</para>

  <para><emphasis role="bold">Warning!</emphasis> Should you change filter
  options whilst a project is open, you must reload the project in order for
  the changes to take effect.</para>

  <section id="file.filters.dialog">
    <title>File filters dialog<indexterm class="singular">
        <primary>File filters</primary>

        <secondary>Dialog</secondary>
      </indexterm></title>

    <para>The dialog lists available file filters. Should you wish not to use
    OmegaT to translate files of a certain type, you can turn off the
    corresponding filter by unticking the check box beside its name. OmegaT
    will then omit the appropriate files while loading projects, and will copy
    them unmodified when creating target documents. When you wish to use the
    filter again, just tick the check box. Click <emphasis
    role="bold">Defaults</emphasis> to reset the file filters to the default
    settings. To edit which files in which encodings the filter is to process,
    select the filter from the list and click <emphasis
    role="bold">Edit.</emphasis></para>
  </section>

  <section id="filters.options">
    <title>Filters options<indexterm class="singular">
        <primary>File filters</primary>

        <secondary>Options</secondary>
      </indexterm></title>

    <para>Five filters (Text files, XHTML files, HTML and XHTML files,
    OpenDocument/OpenOffice.org files and Microsoft Open XML files) have one
    or more specific options. To modify the options select the filter from the
    list and click on <emphasis role="bold">Options</emphasis>. The available
    options are:</para>

    <para><emphasis role="bold">Text files</emphasis></para>

    <itemizedlist>
      <listitem>
        <para><emphasis>Paragraph segmentation on line breaks, empty lines or
        never:</emphasis> if sentence segmentation rules are active, the text
        will further be segmented according to the rules available.</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">HTML files and HTML and XHTML
    Files</emphasis></para>

    <itemizedlist>
      <listitem>
        <para><emphasis>Encoding declaration:
        </emphasis><application>OmegaT</application> may add or rewrite the
        file's encoding declaration upon the encoding selected for the target
        file.</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para><emphasis>Attributes translation: </emphasis>The selected
        attributes will appear as segments in the Editor window.</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para><emphasis>Paragraph on &lt;br&gt;:</emphasis> The &lt;br&gt;
        HTML tag will constitute a paragraph for segmentation purposes.</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para><emphasis>Skip text matching regular expression: </emphasis>The
        text matching the regular expression will be skipped.</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">OpenDocument/OpenOffice.org
    files</emphasis></para>

    <itemizedlist>
      <listitem>
        <para>Index entries</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Bookmarks</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Bookmark references</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Notes</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Comments</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Presentation notes</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Links (URL)</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Sheet names</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">Microsoft Office Open XML
    files</emphasis></para>

    <para>In case the following elements are presented for translation, they
    will appear as separate segments.</para>

    <para><emphasis role="bold">Word</emphasis></para>
    
    <itemizedlist>
      <listitem>
        <para>Non-visible Instruction Text</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Comments</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Footnotes</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Endnotes</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Headers</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Footers</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">Excel</emphasis></para>

    <itemizedlist>
      <listitem>
        <para>Comments</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Sheet Names</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">Power Point</emphasis></para>

    <itemizedlist>
      <listitem>
        <para>Slide Comments</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Slide Masters</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Slide Layouts</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">Global</emphasis></para>

    <itemizedlist>
      <listitem>
        <para>Charts</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Diagrams</para>
      </listitem>
    </itemizedlist>

    <itemizedlist>
      <listitem>
        <para>Drawings</para>
      </listitem>
    </itemizedlist>

    <para><emphasis role="bold">Other Options</emphasis></para>

    <itemizedlist>
      <listitem>
        <para><emphasis>Aggregate tags: </emphasis>If checked, tags without
 translatable text between them will be aggregated into single tags.</para>
      </listitem>
    </itemizedlist>


  </section>

  <section id="edit.filter.dialog">
    <title>Edit filter dialog<indexterm class="singular">
        <primary>File filters</primary>

        <secondary>Editing</secondary>
      </indexterm></title>

    <para>This dialog enables you to set up the source filename patterns of
    files to be processed by the filter, customize the filenames of translated
    files, and select which encodings it should use for loading the file and
    saving its translated counterpart. To modify a file filter pattern, either
    modify the fields directly or click <emphasis role="bold">Edit.</emphasis>
    To add a new file filter pattern, click <emphasis
    role="bold">Add</emphasis>. The same dialog is used to add a pattern or to
    edit a particular pattern. The dialog is useful because it includes a
    special target filename pattern editor with which you can customize the
    names of output files.</para>

    <section id="source.filetype.and.filename.pattern">
      <title><indexterm class="singular">
          <primary>Source files</primary>

          <secondary>File type, filename pattern</secondary>
        </indexterm>Source file type, filename pattern<indexterm
          class="singular">
          <primary>File filters</primary>

          <secondary>Source file type, filename</secondary>
        </indexterm></title>

      <para>When OmegaT encounters a file in its source folder, it attempts to
      select the filter based upon the file's extension. More precisely,
      OmegaT attempts to match each filter's source filename patterns against
      the filename. For example, the pattern <literal>*.xhtml
      </literal>matches any file with the <literal>.xhtml</literal> extension.
      If the appropriate filter is found, the file is assigned to it for
      processing. For example, by default, XHTML filter is used for processing
      files with the .xhtml extension. You can change or add filename patterns
      for files to be handled by each file. Source filename patterns use wild
      card characters similar to those used in <emphasis role="bold">Searches.
      </emphasis>The '*' character matches zero or more characters. The '?'
      character matches exactly one character. All the other characters
      represent themselves. For example, if you wish the text filter to handle
      readme files (<literal>readme, read.me</literal>, and
      <literal>readme.txt</literal>) you should use the pattern
      <literal>read*</literal>.</para>
    </section>

    <section id="source.and.target.files.encoding">
      <title>Source and Target file encoding</title>

      <indexterm class="singular">
        <primary>Source files</primary>

        <secondary>Encoding</secondary>
      </indexterm>

      <indexterm class="singular">
        <primary>Target files</primary>

        <secondary>Encoding</secondary>
      </indexterm>

      <indexterm class="singular">
        <primary>File filters</primary>

        <secondary>Source, target encoding</secondary>
      </indexterm>

      <para>Only a limited number of file formats specify a mandatory
      encoding. File formats that do not specify their encoding will use the
      encoding you set up for the extension that matches their name. For
      example, by default<literal> .txt </literal>files will be loaded using
      the default encoding of your operating system. You may change the source
      encoding for each different source filename pattern. Such files may also
      be written out in any encoding. By default, the translated file encoding
      is the same as the source file encoding. Source and target encoding
      fields use combo boxes with all supported encodings included.
      &lt;auto&gt; leaves the encoding choice to
      <application>OmegaT</application>. This is how it works:</para>

      <itemizedlist>
        <listitem>
          <para>OmegaT identifies the source file encoding by using its
          encoding declaration, if present (HTML files, XML based
          files)</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para>OmegaT is instructed to use a mandatory encoding for certain
          file formats (Java properties etc)</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><application>OmegaT</application> uses the default encoding of
          the operating system for text files.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="target.name">
      <title>Target filename<indexterm class="singular">
          <primary>Target files</primary>

          <secondary>Filenames</secondary>
        </indexterm></title>

      <para>Sometimes you may wish to rename the files you translate
      automatically, for example adding a language code after the file name.
      The target filename pattern uses a special syntax, so if you wish to
      edit this field, you must click <emphasis
      role="bold">Edit...</emphasis>and use the <indexterm class="singular">
          <primary>File filters</primary>

          <secondary>Dialog</secondary>
        </indexterm>Edit Pattern Dialog. If you wish to revert to default
      configuration of the filter, click <emphasis
      role="bold">Defaults.</emphasis> You may also modify the name directly
      in the target filename pattern field of the file filters dialog. The
      Edit Pattern Dialog offers the following options:</para>

      <itemizedlist>
        <listitem>
          <para>Default is <literal>${filename}</literal>– full filename of
          the source file with extension: in this case the name of the
          translated file is the same as that of the source file.</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><literal>${nameOnly}</literal>– allows you to insert only the
          name of the source file without the extension.</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><literal>${targetLocale}</literal>– target locale code (of a
          form "xx_YY").</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><literal>${targetLanguage}</literal>– the target language and
          country code together (of a form "XX-YY").</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><literal>${targetLanguageCode}</literal> – the target language
          only ("XX").</para>
        </listitem>
      </itemizedlist>

      <itemizedlist>
        <listitem>
          <para><literal>${targetCoutryCode}</literal>– the target country
          only ("YY").</para>
        </listitem>
      </itemizedlist>
    </section>
  </section>
</chapter>
