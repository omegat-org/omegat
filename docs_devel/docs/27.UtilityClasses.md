# Utility classes

## Caching 

OmegaT provide caching utility for MT connectors, dictionary drivers and so on.

### How to create cache object

You can use `CacheFactory` like as follows:

    Map<String, String> cache = CacheFactory.getInstance("simple").createCache(16, 500);

    Map<String, String> cache = CacheFactory.getInstance("soft").createCache(16, 500);

A first parameter is initial capacity and second one is maximum size of cache.

You can also use individual factory like as;

    Map<String, String> cache = SimpleCacheFactory.getInstance().createCache(16, 500);
    
    Map<String, String> cache = SoftCacheFactory.getInstance().createCache(16, 500);


Here is complete example how cache is used.


    public class ExmapleConnector extends BaseTranslate {
        private final Map<String, String> cache;

        public ExampleConnector() {
            cache = SimpleCacheFactory.getInstance().createCache(64, 512);
            CoreEvents.registerProjectChangeListener(eventType -> cache.clear());
        }

        @Override
        public String translate(Language sLang, Language tLang, String text) {
            String result;
            result = cache.get(text);
            if (result == null) {  // when there is no cache hit.
                result = query(sLang, tLang, text);
            }
            if (result != null) {
                cache.put(text, result);  // remember for future
            }
        }

        private String query(Language sLang, Language tLang, String text) {
            // actual qeury for web service.
        }
    }

You will want to clear when `project change` event fired. Please refer javadoc for `CacheFactory` utility class.
